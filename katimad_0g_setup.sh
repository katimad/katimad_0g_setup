#!/bin/bash

echo "ì•ˆë…• ì¹œêµ¬ë“¤~ ë§¤ìš´ì¹´ë ˆì¹´í‹°ë§ˆë“œ ì±„ë„ ìš´ì˜ì¤‘ì¸ ì¹´í‹°ë§ˆë“œìž…ë‹ˆë‹¤. ë°˜ê°€ì›Œìš”. ì¦ê²ê²Œ ì„¤ì¹˜í•´ë´…ì‹œë‹¤. ì„¤ì¹˜ë§Œ í•œ 10ë¶„ì´ë©´ë˜ìš”~"
echo "1ì°¨ 0g ì„¤ì¹˜ ë“¤ì–´ê°„ë‹¤. ì•ˆë‚´ê¸€ì´ ì¤‘ê°„ì— ë‚˜ì˜¬êº¼ì•¼. ì„¤ëª…ëŒ€ë¡œ ìˆ˜í–‰í•´ ê¼­!! ì´ìƒí•œê±° í•˜ì§€ë§ê³ .ì¤€ë¹„ëë‹ˆ? ì¹œêµ¬ë“¤~"
read -p "ì¤‘ê°„ì— downloading google.golang.org/appengine v1.6.7 ë‹¤ìš´ ë°›ëŠ” ì‹œê°„ì´ ëŒ€ëžµ 5ë¶„ì •ë„ ê±¸ë¦´ê±°ì•¼ ì˜¤ë¥˜ì•„ë‹ˆë‹ˆ ê·¸ëƒ¥ ê¸°ë‹¤ë ¤ ~ ì—”í„°í•˜ì„¸ìš”"

timedatectl set-timezone UTC

sudo apt update && \
sudo apt install curl git jq build-essential gcc unzip wget lz4 -y

cd $HOME && \
ver="1.21.3" && \
wget "https://golang.org/dl/go$ver.linux-amd64.tar.gz" && \
sudo rm -rf /usr/local/go && \
sudo tar -C /usr/local -xzf "go$ver.linux-amd64.tar.gz" && \
rm "go$ver.linux-amd64.tar.gz" && \
echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> ~/.bash_profile && \
source ~/.bash_profile && \
go version

git clone https://github.com/0glabs/0g-evmos.git
cd 0g-evmos
git checkout v1.0.0-testnet
make install
evmosd version

# ì‚¬ìš©ìžë¡œë¶€í„° ë…¸ë“œ ëª…ì¹­ê³¼ ì§€ê°‘ ì´ë¦„ì„ ìž…ë ¥ ë°›ìŒ
echo "ë…¸ë“œì˜ ëª…ì¹­ì„ ìž…ë ¥í•˜ì„¸ìš” ìƒê°ë‚˜ëŠ”ê±¸ë¡œ ì ìœ¼ì…ˆ(ì˜ì–´ì™€ ìˆ«ìž ì¡°í•©ë§Œ ê°€ëŠ¥)"
read MONIKER
echo "ì§€ê°‘ì˜ ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš” ê·¸ëƒ¥ ë…¸ë“œ ëª…ì¹­ê³¼ ê°™ì•„ë„ ë¬´ë°©í•´ìš”(ì˜ì–´ì™€ ìˆ«ìž ì¡°í•©ë§Œê°€ëŠ¥)"
read WALLET_NAME

# .bash_profile íŒŒì¼ ì—´ì–´ì„œ ì‚¬ìš©ìž ìž…ë ¥ê°’ê³¼ GOPATH, PATH ì¶”ê°€ ë°˜ì˜
{
  echo 'export GOPATH=$HOME/go'
  echo 'export PATH=$PATH:/usr/local/go/bin:$GOPATH/bin'
  echo "export MONIKER=\"$MONIKER\""
  echo 'export CHAIN_ID="zgtendermint_9000-1"'
  echo "export WALLET_NAME=\"$WALLET_NAME\""
  echo 'export RPC_PORT="26657"'
} >> ~/.bash_profile

# ë³€ê²½ ì‚¬í•­ ì¦‰ì‹œ ì ìš©
source ~/.bash_profile

# ë…¸ë“œ ì´ˆê¸°í™”
cd $HOME
evmosd init $MONIKER --chain-id $CHAIN_ID
evmosd config chain-id $CHAIN_ID
evmosd config node tcp://localhost:$RPC_PORT
evmosd config keyring-backend os
sleep 2

# genesis.json ë‹¤ìš´ë¡œë“œ
wget https://github.com/0glabs/0g-evmos/releases/download/v1.0.0-testnet/genesis.json -O $HOME/.evmosd/config/genesis.json
sleep 2

# config.tomlì— seedì™€ peer ì¶”ê°€
PEERS="1248487ea585730cdf5d3c32e0c2a43ad0cda973@peer-zero-gravity-testnet.trusted-point.com:26326" && \
SEEDS="8c01665f88896bca44e8902a30e4278bed08033f@54.241.167.190:26656,b288e8b37f4b0dbd9a03e8ce926cd9c801aacf27@54.176.175.48:26656,8e20e8e88d504e67c7a3a58c2ea31d965aa2a890@54.193.250.204:26656,e50ac888b35175bfd4f999697bdeb5b7b52bfc06@54.215.187.94:26656" && \
sed -i -e "s/^seeds *=.*/seeds = \"$SEEDS\"/; s/^persistent_peers *=.*/persistent_peers = \"$PEERS\"/" $HOME/.evmosd/config/config.toml
sleep 2

# ìµœì†Œ gas ê°€ê²© ì„¤ì •
sed -i "s/^minimum-gas-prices *=.*/minimum-gas-prices = \"0.00252aevmos\"/" $HOME/.evmosd/config/app.toml
sleep 2

# ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„±
sudo tee /etc/systemd/system/ogd.service > /dev/null <<EOF
[Unit]
Description=OG ë…¸ë“œ
After=network.target

[Service]
User=$USER
Type=simple
ExecStart=$(which evmosd) start --home $HOME/.evmosd
Restart=on-failure
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
EOF

# ë…¸ë“œ ì‹œìž‘ ë° ë¡œê·¸ ëª¨ë‹ˆí„°ë§
sudo systemctl daemon-reload && \
sudo systemctl enable ogd && \
sudo systemctl restart ogd &&

source ~/.bash_profile

#ì‹œìž‘ì „ì— ì•Œë¦¬ëŠ” ë‚´ìš©
echo "2ì°¨ ìŠ¤ëƒ…ìƒ·ë“¤ì–´ê°„ë‹¤. ì´ë¯¸ ì„¤ì¹˜ëŠ” ì™„ë£Œí•˜ì˜€ê³ , ì§€ê¸ˆì€ ìŠ¤ëƒ…ìƒ· ë‹¤ìš´ë¡œë“œë¥¼ í†µí•´ ì•„ì£¼ë¹ ë¥´ê²Œ ìµœì‹ ë™ê¸°í™”ì— ê·¼ì ‘ì‹œí‚¬êº¼ì•¼."
read -p "ðŸ”‘ðŸ”‘ìž ê¹!! ì—¬ê¸°ì„œðŸ”‘ðŸ”‘ 1ë¶„ë§ŒðŸ”‘ðŸ”‘ê¸°ë‹¤ë ¤ì£ . ë°©ê¸ˆ ë…¸ë“œê°€ ìŠ¤íƒ€íŠ¸ ë˜ì—ˆìœ¼ë‹ˆ ìŠ¤ëƒ…ìƒ· ì „ì— 1ë¶„ë§Œ ê¸°ë‹¤ë ¸ë‹¤ê°€ ì—”í„°í•˜ì„¸ìš”!!!ðŸ”‘ðŸ”‘ "

# ìŠ¤ëƒ…ìƒ· ì°ìœ¼ëŸ¬ ê°€ìž
wget https://rpc-zero-gravity-testnet.trusted-point.com/latest_snapshot.tar.lz4
sudo systemctl stop ogd
cp $HOME/.evmosd/data/priv_validator_state.json $HOME/.evmosd/priv_validator_state.json.backup
evmosd tendermint unsafe-reset-all --home $HOME/.evmosd --keep-addr-book
lz4 -d -c ./latest_snapshot.tar.lz4 | tar -xf - -C $HOME/.evmosd
mv $HOME/.evmosd/priv_validator_state.json.backup $HOME/.evmosd/data/priv_validator_state.json
sudo systemctl restart ogd; read -p "ìž ì„¤ì¹˜ë„ ì™„ë£Œ, ìµœì‹ ë™ê¸°í™”ë„ ìŠ¤ëƒ…ìƒ·í†µí•´ ì™„ë£Œí–ˆê³  ì´ì œëŠ” ì§€ê°‘ìƒì„± ë° íŽ€ì…‹ì£¼ì†Œìƒì„± í• êº¼ì•¼. ì—”í„°ì¹˜ì„¸ìš”"

read -p "ðŸ”‘ðŸ”‘ìž ê¹ !!! ì§€ê¸ˆ ìµœì‹  ìŠ¤ëƒ…ìƒ· ë°©ê¸ˆ ì‹œìž‘í–ˆìœ¼ë‹ˆ ðŸ”‘ðŸ”‘ì•½ 3ë¶„ë§Œ ê¸°ë‹¤ë ¤ì£ . 3ë¶„ë’¤ì— ì—”í„°ì¹˜ì„¸ìš”"

# ì§€ê°‘ ìƒì„± ë° ì •ë³´ ì¶œë ¥
echo "ìž ì´ì œ Evmos ì‹ ê·œ ì§€ê°‘ ìƒì„± í• êº¼ì•¼ ë¹„ë°€ë²ˆí˜¸ëŠ” ì•„ë¬´ëŸ° ê¸€ìží‘œì‹œê°€ ì•ˆë˜ë‹ˆ ë‹¤í•˜ê³  ì—”í„° ì¹˜ë©´ë¼. ìž Evmos ì§€ê°‘ìƒì„±í•˜ëŸ¬ ê°€ë³´ìž."
read -p "ðŸ”‘ðŸ”‘ì£¼ì˜ì‚¬í•­ðŸ”‘ðŸ”‘ í•œ/ì˜ ì „í™˜ ì—¬ë¶€í™•ì¸ ìœ„í•´ ë©”ëª¨ìž¥ ê²€ì‚¬í•œë’¤ í•˜ë©´ ë” ì¢‹ê² ì§€? ì¡°í•©ì€ ì˜ë¬¸+ìˆ«ìžë§Œ ê°€ëŠ¥í•´ðŸ”‘ðŸ”‘ ê·¸ë¦¬ê³  ë©”ëª¨ìž¥ì— ë³µì‚¬í•´ë‘ì„¸ìš”.ì—‘ì…€ì— ë³µì‚¬í•˜ë©´ ì•ˆë˜ ì£¼ì†Œê°€ ë³µì‚¬ê°€ ì•ˆë˜ðŸ”‘ðŸ”‘ë©”ëª¨ìž¥ì— ë³µì‚¬í•´ ê¼­.ðŸ”‘ðŸ”‘ìž ê°€ë³´ìž ì—”í„°ì¹˜ì„¸ìš”"

# ì§€ê°‘ ìƒì„± ëª…ë ¹ì–´ ì‹¤í–‰
evmosd keys add $WALLET_NAME

# ì‚¬ìš©ìžê°€ ì •ë³´ë¥¼ ë³µì‚¬í•œ í›„ì— ì—”í„°ë¥¼ ëˆ„ë¥¼ ë•Œê¹Œì§€ ëŒ€ê¸°
read -p "ðŸ”‘ðŸ”‘ë‹¤ìŒì€ Evmos ì§€ê°‘ ì •ë³´(ì£¼ì†Œ,ì´ë¦„,ì‹œë“œë¬¸êµ¬)ë¥¼ ì¶œë ¥í•  ì˜ˆì •ì´ì•¼ í„°ë¯¸ë„ë§ˆë‹¤ ë³µì‚¬ë°©ë²•ì´ ë‹¤ë¥¸ë°ðŸ”‘í‘¸í‹°ì˜ê²½ìš°ëŠ” ë§ˆìš°ìŠ¤ ë¸”ë¡ ì§€ì •í•œí›„ ðŸ”‘ ì»¨íŠ¸ë¡¤ + shift +C ë¥¼ ëˆ„ë¥´ê³  ë³µì‚¬í•˜ë©´ë˜ê³  Xshellì€ ë¸”ëŸ­ì§€ì •í›„ ë§ˆìš°ìŠ¤ ì˜¤ë¥¸ìª½í´ë¦­ + ë³µì‚¬ëˆ„ë¥´ê¸° ,ì¼ë‹¨ ë§ˆìš°ìŠ¤ ì˜¤ë¥¸ìª½ ëˆŒëŸ¬ë³´ê³  ì•„ë¬´ê²ƒë„ ì•ˆë‚˜ì˜¤ë©´, ìžì‹ ì´ ì“°ëŠ” ì—¬ëŸ¬ í„°ë¯¸ë„ì„ ë„¤ì´ë²„ì— "ë³µì‚¬ ë°©ë²•" ê²€ìƒ‰í•œí›„ì— ì§„í–‰í•´. Xshellì—ì„œ ì»¨íŠ¸ë¡¤ +Shift + C ëˆ„ë¥´ë©´ ì¢…ë£Œê°€ë˜ê±°ë“ .  ðŸ”‘ðŸ”‘ìžì‹ ì—†ìœ¼ë©´ í°ìœ¼ë¡œ ì‚¬ì§„ì°ìœ¼ì„¸ìš”.ðŸ”‘ðŸ”‘ë©”ëª¨ìž¥ì— ë³µì‚¬í•˜ì…ˆðŸ”‘ðŸ”‘ ìž ì¤€ë¹„ ë˜ì—ˆìœ¼ë©´ ì§€ê¸ˆ ì—”í„°ë¥¼ ëˆ„ë¥´ì„¸ìš”."ðŸ”‘ðŸ”‘ðŸ”‘ðŸ”‘

# ì•”í˜¸ ìž…ë ¥ ëŒ€ê¸°
read -p "ìž ì§€ê¸ˆë¶€í„° íŽ€ì…‹ ë°›ê¸°ìœ„í•œ ë©”íƒ€ë§ˆìŠ¤í¬ ì£¼ì†Œë¥¼ ì¶œë ¥í• êº¼ì—ìš”..ìœ„ì— ë§Œë“ ê±°ëŠ” Evmos ì§€ê°‘ì´ê³ , ì§€ê¸ˆ ì¶œë ¥í•˜ëŠ”ê±°ëŠ” ë©”íƒ€ë§ˆìŠ¤í¬ íŽ€ì…‹ ë°›ì„ ì§€ê°‘ ì£¼ì†Œì—ìš”. ë‘ê°œì˜ ì§€ê°‘ì´ ìƒê²¼ë‹¤ ìƒê°í•˜ì„¸ìš”. ì—”í„°. "

# Fauce ë°›ê¸°ìœ„í•œ ì£¼ì†Œ ì¶œë ¥
echo "ì„¤ì •í•œ ë¹„ë°€ë²ˆí˜¸ ìž…ë ¥í›„ ì—”í„°í•˜ì„¸ìš”" && \
echo "0x$(evmosd debug addr $(evmosd keys show $WALLET_NAME -a) | grep hex | awk '{print $3}')"

# ì£¼ì†Œ ì¶œë ¥ë˜ë©´ ë³µì‚¬ í•˜ì„¸ìš”
read -p "ðŸ”‘ðŸ”‘íŽ€ì…‹ ë°›ì„ ë©”íƒ€ë§ˆìŠ¤í¬ ì£¼ì†Œë¥¼ ì¶œë ¥í• ì˜ˆì •ì´ì•¼. ì£¼ì†Œë¥¼ ê¼­ ë³µì‚¬í•´ë‘¬.ðŸ”‘ðŸ”‘í‘¸í‹° í„°ë¯¸ë„ì—ì„œ ë³µì‚¬ëŠ” ì»¨íŠ¸ë¡¤ + shift + C ìž…ë‹ˆë‹¤. ë‹¤ë¥¸ í„°ë¯¸ë„ì€ ë§ˆìš°ìŠ¤ë¡œ ë¸”ëŸ­ì§€ì • í›„ì— ë§ˆìš°ìŠ¤ì˜¤ë¥¸ìª½ í´ë¦­í•´ë´ðŸ”‘ðŸ”‘ìž ì¤€ë¹„ë˜ì—ˆìœ¼ë©´ ì§€ê¸ˆ ì—”í„°ë¥¼ ëˆ„ë¥´ì„¸ìš”ðŸ”‘ðŸ”‘ "

# ì™„ë£Œ ë©”ì‹œì§€ ì¶œë ¥
echo "ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. 0g ë…¸ë“œëŸ¬ë„ˆê°€ ë˜ì…¨ìŠµë‹ˆë‹¤. í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¹´ë ˆì±„ë„ ì¹´í‹°ë§ˆë“œ ë³¸ì¸ì´ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ë¬´ë£Œë°°í¬ìž…ë‹ˆë‹¤."
echo "ë§¤ìš´ì¹´ë ˆ ì¹´í‹°ë§ˆë“œ ë§¤ìš´ì¹´ë ˆ ì¹´í‹°ë§ˆë“œ ë§¤ìš´ì¹´ë ˆ ì¹´í‹°ë§ˆë“œ ë§¤ìš´ì¹´ë ˆ ì¹´í‹°ë§ˆë“œ ë§¤ìš´ì¹´ë ˆ ì¹´í‹°ë§ˆë“œ ë§¤ìš´ì¹´ë ˆ ì¹´í‹°ë§ˆë“œ"
echo "ê·¸ ë‹¤ìŒ í•´ì•¼ë  ìž‘ì—…ì€ https://faucet.0g.ai/  ì—¬ê¸° ì‚¬ì´íŠ¸ ê°€ì„œ ìœ„ ë©”ë§ˆ ì£¼ì†Œë¥¼ ë¶™ì—¬ë„£ì–´ íŽ€ì…‹ì„ ë°›ì•„ì•¼ë©ë‹ˆë‹¤."
echo "íŽ€ì…‹ì´ ë“¤ì–´ì˜¬ë ¤ë©´ ë¸”ë¡ì´ ìµœì‹  ë™ê¸°í™”ê°€ ë§ˆì³ì•¼ ë©ë‹ˆë‹¤. ìµœì‹  ë™ê¸°í™” ë˜ëŠ”ë°..í•œ..30ë¶„ ê±¸ë¦½ë‹ˆë‹¤."
echo "ì¼ë‹¨ íŽ€ì…‹ì„ í™ˆíŽ˜ì´ì§€ì— ì‹ ì²­í•œ í›„ì—, ë™ê¸°í™”ê°€ ë§ˆì¹˜ë©´ ëª…ë ¹ì–´ë¥¼ ë„£ì–´ì„œ ë™ê¸°í™”ê°€ ìµœì‹ ë²„ì ¼ì¸ falseê°€ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”"
echo "ìŠ¤í…Œì´í‚¹ ì™„ë£Œ í›„ì— https://explorer.validatorvn.com/OG-Testnet ì—¬ê¸°ì„œ Evmos ì£¼ì†Œë„£ìœ¼ë©´ ëŒ€ì‹œë³´ë“œì— ìžì‹ ì˜ ë…¸ë“œê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤."
echo "ì´ê±° ì´í›„ë¡œ í•´ì•¼ë  ì‚¬í•­ì€ ì±„ë„ í¬ìŠ¤íŒ…ì— ì ì–´ë‘ì—ˆìœ¼ë‹ˆ í•œë²ˆë” í™•ì¸í•˜ì„¸ìš”..ì•ˆë‡½"
read -p "ì¢…ë£Œí•˜ê¸°ì „ì— í˜„ìž¬ ë…¸ë“œ ìƒíƒœ ì¢€ ë³¼ê»˜ . ë™ê¸°í™”ëŠ” false ë¼ê³  ë‚˜ì˜¤ë©´ ìµœì‹ ë™ê¸°í™”ì´ê³ , ture ë¼ê³  ë‚˜ì˜¤ë©´ ë™ê¸°í™”ê°€ ì§„í–‰ì¤‘ì´ì•¼ tureë¼ë©´ í•œ..30ë¶„ ë” ê¸°ë‹¤ë ¤ì•¼í• êº¼ì•¼."

evmosd status | jq

echo "ðŸ”‘ðŸ”‘ ì•„â€¦ í˜¹ì‹œ ìŠ¤í¬ë¦° ê°™ì€ê±° ì„¤ì¹˜í•´ì•¼ë˜ëŠ”ê±° ì•„ë‹ˆì—ìš”? ë¼ê³  ë¬¼ìœ¼ë©´, ì‘. ì•ˆí•´ë„ë˜. ìŠ¤í¬ë¦° ì—†ì–´ë„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ëŒì•„ê°€ê³ ìžˆì–´ ì•ˆì‹¬í•´.ì´ê±´ ë‹¤ë¥¸ë°©ì‹ì´ì•¼.ðŸ”‘ðŸ”‘"
echo "ì•„ì°¸ì°¸ í˜„ìž¬ ðŸ”‘ðŸ”‘ë¡œê·¸ê°€ ì˜¬ë¼ì˜¤ê³ ðŸ”‘ðŸ”‘ ë¸”ë¡ì´ ìž˜ ìŒ“ì´ê³  ìžˆëŠ”ì§€ ë³´ì—¬ì¤„ê»˜ðŸ”‘ðŸ”‘ ê¸€ë“¤ì´ ìž˜ì˜¬ë¼ì˜¤ê³  ì›€ì§ì´ê³  ìžˆìœ¼ë©´ ì„±ê³µí•œê±°ì•¼.. ë‹¤ë³´ê³  ë‚˜ë©´ðŸ”‘ðŸ”‘ ì»¨íŠ¸ë¡¤ + C ëˆ„ë¥´ë©´ë˜, ðŸ”‘ìž ë³´ëŸ¬ ê°€ë³´ìž ðŸ”‘ì—”í„°í•˜ì„¸ìš” ðŸ”‘ðŸ”‘ìˆ˜ê³ í–ˆì–´. ì§„ì§œ ì•ˆë…•!!ðŸ”‘ðŸ”‘"
echo "ðŸ”‘ðŸ”‘ ì»¨íŠ¸ë¡¤ + C ê¸°ì–µí•´!! ðŸ”‘ ë§Œì•½ ì¢…ë£Œê°€ ì•ˆë˜ë©´ ê·¸ëƒ¥ ë„ë©´ë˜ ì•Œì•˜ì§€?ðŸ”‘ ë¡œê·¸ ìž˜ì˜¬ë¼ì˜¤ë©´ ì¹´í‹°ë§ˆë“œ ë§Œì„¸ í•œë²ˆ í•´ë´.ðŸ”‘"
read -p "ðŸ”‘ë§¤ìš´ ì¹´ë ˆ ì¹´í‹°ë§ˆë“œ ì±„ë„ êµ¬ë… ìžŠì§€ë§ˆðŸ”‘ https://t.me/katimad ðŸ”‘ì—”í„°í•˜ì„¸ìš”.ðŸ”‘"

sudo journalctl -u ogd -f -o cat
